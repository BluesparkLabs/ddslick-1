!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){function d(e,d){var i=e.find(".dd-option-value[value= '"+d+"']").parents("li").prevAll().length;t(e,i)}function t(d,t,i){var a=d.data("ddslick"),s=d.find(".dd-selected"),l=s.siblings(".dd-selected-value"),c=d.find(".dd-option").eq(t),r=c.closest("li"),p=a.settings,f=a.settings.data[t];if(d.find(".dd-option").removeClass("dd-option-selected"),c.addClass("dd-option-selected"),a.selectedIndex=t,a.selectedItem=r,a.selectedData=f,p.showSelectedHTML){var u=e("<div>");f.imageSrc&&u.append(e("<img>").addClass("dd-selected-image"+("right"===p.imagePosition?" dd-image-right":"")).attr("src",f.imageSrc)),f.text&&u.append(e("<label>").addClass("dd-selected-text").text(f.text)),f.description&&u.append(e("<small>").addClass("dd-selected-description dd-desc"+(p.truncateDescription?" dd-selected-description-truncated":"")).text(f.description)),s.html(u.html())}else s.html(f.text);l.val(f.value),a.original.val(f.value),d.data("ddslick",a),n(d),o(d),i&&"function"==typeof p.onSelected&&p.onSelected.call(this,a)}function i(d){var t=d.find(".dd-select"),i=t.siblings(".dd-options"),n=t.find(".dd-pointer"),o=i.is(":visible"),s=l[d.attr("data-settings-id")];e(".dd-click-off-close").not(i).slideUp(s.animationTime),e(".dd-pointer").removeClass("dd-pointer-up"),t.removeClass("dd-open"),o?(i.slideUp(s.animationTime),n.removeClass("dd-pointer-up"),t.removeClass("dd-open")):(t.addClass("dd-open"),i.slideDown(s.animationTime),n.addClass("dd-pointer-up")),a(d)}function n(e){var d=l[e.attr("data-settings-id")];e.find(".dd-select").removeClass("dd-open"),e.find(".dd-options").slideUp(d.animationTime),e.find(".dd-pointer").removeClass("dd-pointer-up").removeClass("dd-pointer-up")}function o(e){var d=e.find(".dd-select").css("height"),t=e.find(".dd-selected-description"),i=e.find(".dd-selected-image");t.length<=0&&i.length>0&&e.find(".dd-selected-text").css("lineHeight",d)}function a(d){d.find(".dd-option").each(function(){var t=e(this),i=t.css("height"),n=t.find(".dd-option-description"),o=d.find(".dd-option-image");n.length<=0&&o.length>0&&t.find(".dd-option-text").css("lineHeight",i)})}e.fn.ddslick=function(d){return s[d]?s[d].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof d&&d?void e.error("Method "+d+" does not exists."):s.init.apply(this,arguments)};var s={},l={},c={data:[],keepJSONItemsOnTop:!1,animationTime:50,width:260,height:null,background:"#eee",selectText:"",defaultSelectedIndex:null,truncateDescription:!0,imagePosition:"left",showSelectedHTML:!0,clickOffToClose:!0,embedCSS:!0,onSelected:function(){}},r=!1,p="<div class='dd-select'><input class='dd-selected-value' type='hidden' /><a class='dd-selected'></a><span class='dd-pointer dd-pointer-down'></span></div>",f="<ul class='dd-options'></ul>",u="<style id='css-ddslick' type='text/css'>.dd-select{ border-radius:2px; border:solid 1px #ccc; position:relative; cursor:pointer;}.dd-desc { color:#aaa; display:block; overflow: hidden; font-weight:normal; line-height: 1.4em; }.dd-selected{ overflow:hidden; display:block; padding:10px; font-weight:bold;}.dd-pointer{ width:0; height:0; position:absolute; right:10px; top:50%; margin-top:-3px;}.dd-pointer-down{ border:solid 5px transparent; border-top:solid 5px #000; }.dd-pointer-up{border:solid 5px transparent !important; border-bottom:solid 5px #000 !important; margin-top:-8px;}.dd-options{ border:solid 1px #ccc; border-top:none; list-style:none; box-shadow:0px 1px 5px #ddd; display:none; position:absolute; z-index:2000; margin:0; padding:0;background:#fff; overflow:auto;}.dd-option{ padding:10px; display:block; border-bottom:solid 1px #ddd; overflow:hidden; text-decoration:none; color:#333; cursor:pointer;-webkit-transition: all 0.25s ease-in-out; -moz-transition: all 0.25s ease-in-out;-o-transition: all 0.25s ease-in-out;-ms-transition: all 0.25s ease-in-out; }.dd-options > li:last-child > .dd-option{ border-bottom:none;}.dd-option:hover{ background:#f3f3f3; color:#000;}.dd-selected-description-truncated { text-overflow: ellipsis; white-space:nowrap; }.dd-option-selected { background:#f6f6f6; }.dd-option-image, .dd-selected-image { vertical-align:middle; float:left; margin-right:5px; max-width:64px;}.dd-image-right { float:right; margin-right:15px; margin-left:5px;}.dd-container{ position:relative;}​ .dd-selected-text { font-weight:bold}​</style>";s.init=function(d){var n=e.extend({},c,d);return e("#css-ddslick").length<=0&&n.embedCSS&&e(u).appendTo("head"),this.each(function(){var n=e.extend({},c,d),o=e(this),a=o.data("ddslick");if(!a){var s=[];o.find("option").each(function(){var d=e(this),t=d.data();s.push({text:e.trim(d.text()),value:d.val(),selected:d.is(":selected"),description:t.description,imageSrc:t.imagesrc})}),n.keepJSONItemsOnTop?e.merge(n.data,s):n.data=e.merge(s,n.data);var u=o,h=e("<div>").attr("id",o.attr("id"));o.replaceWith(h),o=h;var g="ID_"+(new Date).getTime();e(o).attr("data-settings-id",g),l[g]={},e.extend(l[g],n),o.addClass("dd-container").append(p).append(f),o.find("input.dd-selected-value").attr("id",e(u).attr("id")).attr("name",e(u).attr("name"));var m=o.find(".dd-options");s=o.find(".dd-select"),m.css({width:n.width}),s.css({width:n.width,background:n.background}),o.css({width:n.width}),null!==n.height&&m.css({height:n.height,overflow:"auto"}),e.each(n.data,function(d,t){t.selected&&(n.defaultSelectedIndex=d);var i=e("<li>").append(e("<a>").addClass("dd-option")),o=i.find("a");t.value&&o.append(e("<input>").addClass("dd-option-value").attr("type","hidden").val(t.value)),t.imageSrc&&o.append(e("<img>").attr("src",t.imageSrc).addClass("dd-option-image"+("right"===n.imagePosition?" dd-image-right":""))),t.text&&o.append(e("<label>").addClass("dd-option-text").text(t.text)),t.description&&o.append(e("<small>").addClass("dd-option-description dd-desc").text(t.description)),m.append(i)});var v={settings:n,original:u,selectedIndex:-1,selectedItem:null,selectedData:null};if(o.data("ddslick",v),n.selectText.length>0&&null===n.defaultSelectedIndex)o.find(".dd-selected").html(n.selectText);else{var x=null!=n.defaultSelectedIndex&&n.defaultSelectedIndex>=0&&n.defaultSelectedIndex<n.data.length?n.defaultSelectedIndex:0;t(o,x,!1)}o.find(".dd-select").on("click.ddslick",function(){i(o)}),o.find(".dd-option").on("click.ddslick",function(){t(o,e(this).closest("li").index(),!0)}),n.clickOffToClose&&(m.addClass("dd-click-off-close"),o.on("click.ddslick",function(e){e.stopPropagation()}),r||(r=!0,e("body").on("click",function(){e(".dd-open").removeClass("dd-open"),e(".dd-click-off-close").slideUp(n.animationTime).siblings(".dd-select").find(".dd-pointer").removeClass("dd-pointer-up")})))}})},s.select=function(i){return this.each(function(){void 0!==i.index&&t(e(this),i.index),void 0!==i.value&&d(e(this),i.value),void 0!==i.id&&d(e(this),i.id)})},s.open=function(){return this.each(function(){var d=e(this),t=d.data("ddslick");t&&i(d)})},s.close=function(){return this.each(function(){var d=e(this),t=d.data("ddslick");t&&n(d)})},s.destroy=function(){return this.each(function(){var d=e(this),t=d.data("ddslick");if(t){var i=t.original;d.removeData("ddslick").unbind(".ddslick").replaceWith(i)}})}});